{"version":3,"sources":["webpack:///./src/components/cart/cart.vue","webpack:///./src/components/cart/cart.vue?a476","webpack:///./src/components/guideLine.vue","webpack:///./src/components/guideLine.vue?397e"],"names":["class","data-width","_createElementVNode","style","data-space-bottom","data-space-top","_createElementBlock","_createVNode","_component_Toast","position","group","message","slot","_hoisted_5","_toDisplayString","summary","_component_Button","label","onClick","$setup","data-space-right","ID","_component_guideLine","data","_component_Steps","model","_hoisted_9","_hoisted_11","_Fragment","_renderList","goodsList","item","i","key","src","ImageUrls","Url","alt","Ident","Goods","Name","specsName","TimestampPice","_component_InputNumber","Specs","Num","$event","total","_hoisted_32","_hoisted_33","_component_Dropdown","deliveryValue","options","optionLabel","optionValue","placeholder","onChange","_hoisted_35","paymentValue","_hoisted_38","_hoisted_40","_hoisted_42","_hoisted_44","discountID","length","_hoisted_45","discountFee","_hoisted_47","_hoisted_49","_component_Dialog","header","visible","width","breakpoints","footer","benefits","id","type","value","Amount","for","_hoisted_54","_hoisted_55","name","components","guideLine","setup","store","useStore","reload","inject","router","useRouter","toast","useToast","dialogDiscountVisible","ref","state","reactive","goodsSpecs","currentSpecs","updateCartForm","GoodsID","SpecID","deliveryFee","payItems","sentItems","guideData","to","steps","feeMethodSelect","feeChange","computed","orderTotal","getCartData","onMounted","callApi","getGoodsCart","res","Data","totalCount","specsChange","getGoodsSpecs","goodsInfo","JSON","parse","localStorage","getItem","specs","map","GoodsSpecs","flat","Infinity","specsCommon","orderSpecs","specsAdded","j","push","splice","join","deleteCartData","async","add","severity","onReject","removeGroup","onConfirm","deleteGoodsCart","handleNextPage","commit","allGoodsTotal","changeCart","method","obj","updateCartInfo","getBenefitsData","benefitsList","DiscountTicket","handleSpecsMax","event","fee","target","checked","discountButton","cancel","confirm","renderCartImg","img","process","__exports__","render","_component_Breadcrumb","home","props","Array","pageData","icon"],"mappings":"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","file":"js/chunk-167d0209.0afbfc8d.js","sourcesContent":["<template>\n  <div class=\"cart container\">\n    <Toast position=\"center\" />\n    <Toast position=\"center\" group=\"goodsDelete\">\n      <template #message=\"slot\">\n        <div class=\"row horizontal\">\n          <div data-width=\"100%\">\n            <div class=\"row vertical center\">\n              <i class=\"pi pi-exclamation-circle\" style=\"font-size: 3rem\" data-space-bottom=\"1rem\"></i>\n              <h4>{{ slot.message.summary }}</h4>\n            </div>\n            <div class=\"row horizontal center\">\n              <Button class=\"p-button-success\" label=\"取消\" @click=\"onReject()\" data-space-right=\"1rem\"></Button>\n              <Button class=\"p-button-secondary\" label=\"確定\" @click=\"onConfirm(slot.message.ID)\"></Button>\n            </div>\n          </div>\n        </div>\n      </template>\n    </Toast>\n    <guideLine :data=\"guideData\" />\n    <div class=\"cart-page\">\n      <div class=\"card\" data-space-bottom=\"2rem\">\n        <Steps :model=\"steps\" />\n      </div>\n      <h2 class=\"exception_title\">購物車</h2>\n      <div class=\"cart-data\">\n        <ul class=\"cart-data-title\">\n          <li data-width=\"55%\">商品詳情</li>\n          <li data-width=\"22%\">數量</li>\n          <li data-width=\"20%\">小計</li>\n        </ul>\n        <div class=\"cart-data-content\" v-for=\"(item, i) in state.goodsList\" :key=\"i\">\n          <div class=\"cart-data-content_detail\">\n            <img :src=\"renderCartImg(item.ImageUrls[0].Url)\" :alt=\"item.ImageUrls[0].Ident\" />\n            <div>\n              <h3>{{ item.Goods.Name }}</h3>\n              <span>{{ item.specsName }}</span>\n              <p class=\"cart-data-content_price\">NT{{ item.TimestampPice }}</p>\n            </div>\n          </div>\n          <div class=\"cart-data-count\">\n            <i class=\"pi pi-minus\" style=\"font-size: 0.5rem\" @click=\"changeCart('minus', item)\"></i>\n            <InputNumber v-model=\"item.Specs[0].Num\" class=\"p-inputtext-sm\"></InputNumber>\n            <i class=\"pi pi-plus\" style=\"font-size: 0.5rem\" @click=\"changeCart('plus', item)\"></i>\n          </div>\n          <div class=\"cart-data-content_total\">NT {{ item.total }}</div>\n          <i class=\"pi pi-times\" @click=\"deleteCartData(item.ID)\"></i>\n        </div>\n        <div class=\"cart-data-content-media\" v-for=\"(item, i) in state.goodsList\" :key=\"i\">\n          <div class=\"cart-data-content-media_detail\">\n            <img :src=\"renderCartImg(item.ImageUrls[0].Url)\" :alt=\"item.ImageUrls[0].Ident\" />\n            <div data-width=\"65%\">\n              <h3>{{ item.Goods.Name }}</h3>\n              <span>{{ item.specsName }}</span>\n              <p class=\"cart-data-content_price\">NT{{ item.TimestampPice }}</p>\n            </div>\n            <i class=\"pi pi-times\" @click=\"deleteCartData(item.ID)\"></i>\n          </div>\n          <div class=\"row horizontal space_between\" data-space-top=\"1rem\">\n            <div class=\"cart-data-count\">\n              <i class=\"pi pi-minus\" style=\"font-size: 0.5rem\" @click=\"changeCart('minus', item)\"></i>\n              <InputNumber v-model=\"item.Specs[0].Num\" class=\"p-inputtext-sm\"></InputNumber>\n              <i class=\"pi pi-plus\" style=\"font-size: 0.5rem\" @click=\"changeCart('plus', item)\"></i>\n            </div>\n            <div class=\"cart-data-content_total\">NT {{ item.total }}</div>\n          </div>\n        </div>\n      </div>\n      <div class=\"order-options\">\n        <div class=\"send\">\n          <h2>送貨以及付款方式</h2>\n          <p>送貨方式</p>\n          <div class=\"sent_options\">\n            <Dropdown\n              v-model=\"state.deliveryValue\"\n              :options=\"sentItems\"\n              optionLabel=\"name\"\n              optionValue=\"name\"\n              placeholder=\"請選擇送貨方式\"\n              @change=\"feeMethodSelect()\"\n            />\n          </div>\n          <p>付款方式</p>\n          <div class=\"sent_options\">\n            <Dropdown v-model=\"state.paymentValue\" :options=\"payItems\" optionValue=\"name\" optionLabel=\"name\" placeholder=\"請選擇付款方式\" />\n          </div>\n        </div>\n        <div class=\"info\">\n          <h2>訂單資訊</h2>\n          <div class=\"row horizontal space_between\">\n            <p>商品總計：</p>\n            <p>NT {{ allGoodsTotal }}</p>\n          </div>\n          <div class=\"row horizontal space_between\">\n            <p>運費</p>\n            <p>NT {{ feeChange }}</p>\n          </div>\n          <div class=\"row horizontal space_between\">\n            <p>優惠券</p>\n            <p v-if=\"state.discountID.length === 1\">NT -{{ state.discountFee }}</p>\n          </div>\n          <div class=\"row horizontal h_end\">\n            <span @click=\"dialogDiscountVisible = true\">使用優惠券</span>\n          </div>\n          <hr />\n          <div class=\"row horizontal space_between\">\n            <p>合計：</p>\n            <p>NT {{ orderTotal }}</p>\n          </div>\n        </div>\n        <Dialog header=\"優惠券\" v-model:visible=\"dialogDiscountVisible\" :style=\"{ width: '500px' }\" :breakpoints=\"{ '550px': '60vw' }\" class=\"cart_dialog\">\n          <div class=\"discount-content\">\n            <div v-for=\"(item, i) in state.benefits\" :key=\"i\" class=\"discount_item\">\n              <input :id=\"item.ID\" type=\"checkbox\" :value=\"item.ID\" v-model=\"state.discountID\" @click=\"handleSpecsMax($event, item.Amount)\" />\n              <label :for=\"item.ID\">\n                <div class=\"dialog-discount\">\n                  <h2>NT ${{ state.benefits[i].Amount }}</h2>\n                  <p>單筆消費滿1000元即可使用一張</p>\n                  <p>使用日期：2022/12/31</p>\n                </div>\n              </label>\n            </div>\n          </div>\n          <template #footer>\n            <div class=\"row horizontal\" data-space-top=\"1rem\">\n              <button class=\"button_cancel\" @click=\"discountButton('cancel')\">取消</button>\n              <button class=\"button_confirm\" @click=\"discountButton('confirm')\">確定</button>\n            </div>\n          </template>\n        </Dialog>\n      </div>\n      <div class=\"row horizontal h_end\" data-width=\"80%\" style=\"margin: 20px auto\">\n        <button class=\"button_confirm\" data-width=\"40%\" @click=\"handleNextPage()\">前往結賬</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { reactive, ref, onMounted, computed, inject } from 'vue'\nimport guideLine from '@/components/guideLine.vue'\nimport { useRouter } from 'vue-router'\nimport { useToast } from 'primevue/usetoast'\nimport { getGoodsCart, deleteGoodsCart, updateCartInfo, benefitsList } from '@/service/api'\nimport { callApi } from '@/utils/callApi'\nimport { useStore } from 'vuex'\n\nexport default {\n  name: 'Cart',\n  components: {\n    guideLine\n  },\n  setup() {\n    const store = useStore()\n    const reload = inject('reload')\n    const router = useRouter()\n    const toast = useToast()\n    const dialogDiscountVisible = ref(false)\n    const state = reactive({\n      discountID: [],\n      benefits: [],\n      goodsList: [],\n      goodsSpecs: [], // 所有規格\n      currentSpecs: [],\n      updateCartForm: {\n        ID: 0,\n        GoodsID: 0,\n        Specs: [\n          {\n            ID: 0,\n            SpecID: 0,\n            Num: 0\n          }\n        ]\n      },\n      deliveryValue: null,\n      paymentValue: null,\n      deliveryFee: 0,\n      discountFee: null,\n      total: 0\n    })\n    const payItems = reactive([\n      {\n        name: '現金付款'\n      },\n      {\n        name: '信用卡'\n      },\n      {\n        name: '匯款'\n      }\n    ])\n    const sentItems = reactive([\n      {\n        name: '自取'\n      },\n      {\n        name: '冷藏包裹'\n      }\n    ])\n    const guideData = reactive([\n      {\n        label: '購物車',\n        to: '/cart'\n      }\n    ])\n    const steps = reactive([\n      {\n        label: '訂單資訊',\n        to: '/cart'\n      },\n      {\n        label: '填寫資料',\n        to: '/fillInfo'\n      },\n      {\n        label: '資料確認',\n        to: '/finish'\n      }\n    ])\n    //根據選擇的寄送方式運費不同\n    const feeMethodSelect = () => {\n      state.deliveryValue === '自取' ? (state.deliveryFee = 0) : (state.deliveryFee = 150)\n    }\n    const feeChange = computed(() => {\n      return state.deliveryFee * 1\n    })\n    //整筆訂單的金額總數\n    const orderTotal = computed(() => {\n      let total = 0\n      for (let i in state.goodsList) {\n        total += state.goodsList[i].total\n      }\n      return total + state.deliveryFee - state.discountFee\n    })\n    //取得購物車資料\n    const getCartData = onMounted(() => {\n      const data = ''\n      callApi(getGoodsCart, data, (res) => {\n        state.goodsList = [...res.data.Data]\n        totalCount()\n        specsChange()\n      })\n    })\n    //得到所有商品規格\n    const getGoodsSpecs = onMounted(() => {\n      const goodsInfo = JSON.parse(localStorage.getItem('goodsInfo'))\n      let specs = goodsInfo.map((item) => {\n        return item.GoodsSpecs\n      })\n      state.goodsSpecs = specs.flat(Infinity)\n    })\n    //針對一筆商品內規格作轉換(chiffon/other)\n    const specsCommon = (orderSpecs) => {\n      for (let i in state.goodsSpecs) {\n        if (orderSpecs.Specs[0].SpecID == state.goodsSpecs[i].ID) {\n          orderSpecs.specsName = state.goodsSpecs[i].Specs\n        }\n      }\n    }\n    //針對一筆商品內規格作轉換(macaron/cupcake)\n    const specsAdded = (orderSpecs) => {\n      for (let i in orderSpecs.Specs) {\n        for (let j in state.goodsSpecs) {\n          if (orderSpecs.Specs[i].SpecID == state.goodsSpecs[j].ID) {\n            orderSpecs.specsName.push(state.goodsSpecs[j].Specs)\n          }\n        }\n      }\n      orderSpecs.specsName.splice(0, 1)\n      orderSpecs.specsName = orderSpecs.specsName.join()\n    }\n    //取得訂單中規格超過一筆的資料\n    const specsChange = () => {\n      for (let i in state.goodsList) {\n        if (state.goodsList[i].Specs.length > 1) {\n          state.goodsList[i].specsName = []\n          specsAdded(state.goodsList[i])\n        } else if (state.goodsList[i].Specs.length == 1) {\n          specsCommon(state.goodsList[i])\n        }\n      }\n    }\n    //刪除購物車資料\n    const deleteCartData = async (id) => {\n      toast.add({ severity: 'success', summary: '確定要刪除商品？', group: 'goodsDelete', ID: id })\n    }\n    const onReject = () => {\n      toast.removeGroup('goodsDelete')\n    }\n    const onConfirm = async (id) => {\n      const data = { ID: id }\n      await callApi(deleteGoodsCart, data, () => {\n        toast.removeGroup('goodsDelete')\n        getCartData()\n      })\n      await reload()\n    }\n    // 前往下一頁\n    const handleNextPage = async () => {\n      if (state.deliveryValue && state.paymentValue) {\n        store.commit('cartModules/SET_CARTPAYMENT', state)\n        store.commit('cartModules/SET_CARTTOTAL', orderTotal.value)\n        router.push({ name: 'FillInfo' })\n      } else {\n        toast.add({ severity: 'error', summary: '請選擇送貨與付款方式', group: 'errorBox' })\n      }\n    }\n    //每筆商品的金額總數\n    const totalCount = () => {\n      for (let i in state.goodsList) {\n        state.goodsList[i]['total'] = state.goodsList[i].TimestampPice * state.goodsList[i].Specs[0].Num\n      }\n    }\n    //所有商品的金額總數\n    const allGoodsTotal = computed(() => {\n      let total = 0\n      for (let i in state.goodsList) {\n        total += state.goodsList[i].total\n      }\n      return total\n    })\n    //更新購物車的商品數量\n    const changeCart = (method, obj) => {\n      state.updateCartForm.ID = obj.ID\n      state.updateCartForm.GoodsID = obj.GoodsID\n      state.updateCartForm.Specs[0].ID = obj.Specs[0].ID\n      state.updateCartForm.Specs[0].SpecID = obj.Specs[0].SpecID\n      if (method === 'plus' && obj.Specs[0].Num < 99) state.updateCartForm.Specs[0].Num = obj.Specs[0].Num + 1\n      else if (method === 'minus' && obj.Specs[0].Num > 1) state.updateCartForm.Specs[0].Num = obj.Specs[0].Num - 1\n      const data = state.updateCartForm\n      callApi(updateCartInfo, data, () => {\n        getCartData()\n      })\n    }\n    //得到優惠券資料\n    const getBenefitsData = onMounted(() => {\n      const data = ''\n      callApi(benefitsList, data, (res) => {\n        state.benefits = [...res.data.Data.DiscountTicket]\n      })\n    })\n    //限制商品規格的數量\n    const handleSpecsMax = (event, fee) => {\n      if (event.target.checked === true) {\n        if (allGoodsTotal.value >= 1000) {\n          if (state.discountID.length == 1) {\n            event.target.checked = false\n            toast.add({ severity: 'error', summary: '已超過數量！', group: 'errorBox' })\n          } else {\n            state.discountFee = fee\n          }\n        } else {\n          event.target.checked = false\n          toast.add({ severity: 'error', summary: '消費金額未達到！', group: 'errorBox' })\n        }\n      } else {\n        state.discountFee = null\n      }\n    }\n    const discountButton = (method) => {\n      const obj = {\n        cancel: () => {\n          state.discountFee = null\n          state.discountID = []\n          dialogDiscountVisible.value = false\n        },\n        confirm: () => {\n          dialogDiscountVisible.value = false\n        }\n      }\n      obj[method]()\n    }\n    //傳回來的圖片加上正確網址\n    const renderCartImg = (img) => {\n      return process.env.VUE_APP_BASE_API + '/imgs/' + img\n    }\n    return {\n      state,\n      getGoodsSpecs,\n      getBenefitsData,\n      guideData,\n      steps,\n      sentItems,\n      payItems,\n      dialogDiscountVisible,\n      getCartData,\n      allGoodsTotal,\n      feeChange,\n      orderTotal,\n      discountButton,\n      specsChange,\n      renderCartImg,\n      handleSpecsMax,\n      changeCart,\n      handleNextPage,\n      deleteCartData,\n      onConfirm,\n      onReject,\n      totalCount,\n      feeMethodSelect\n    }\n  }\n}\n</script>\n","import { render } from \"./cart.vue?vue&type=template&id=1ff1eca6\"\nimport script from \"./cart.vue?vue&type=script&lang=js\"\nexport * from \"./cart.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/risu_ann/Documents/web/dessert_work/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <div class=\"guide\" data-space-bottom=\"2.5rem\">\n    <Breadcrumb :home=\"home\" :model=\"pageData\" />\n  </div>\n</template>\n<script>\nimport { reactive } from 'vue'\nexport default {\n  name: 'GuideLine',\n  props: {\n    data: Array\n  },\n  setup(props) {\n    const pageData = props.data\n    const home = reactive({\n      icon: 'pi pi-home',\n      to: '/content'\n    })\n    return {\n      pageData,\n      home\n    }\n  }\n}\n</script>\n","import { render } from \"./guideLine.vue?vue&type=template&id=4fad1ac4\"\nimport script from \"./guideLine.vue?vue&type=script&lang=js\"\nexport * from \"./guideLine.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/risu_ann/Documents/web/dessert_work/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}