(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-167d0209"],{"33e4":function(e,t,c){"use strict";c.r(t);var a=c("7a23");const s={class:"cart container"},o={class:"row horizontal"},l={"data-width":"100%"},n={class:"row vertical center"},i=Object(a["j"])("i",{class:"pi pi-exclamation-circle",style:{"font-size":"3rem"},"data-space-bottom":"1rem"},null,-1),d={class:"row horizontal center"},j={class:"cart-page"},r={class:"card","data-space-bottom":"2rem"},b=Object(a["j"])("h2",{class:"exception_title"},"購物車",-1),u={class:"cart-data"},p=Object(a["j"])("ul",{class:"cart-data-title"},[Object(a["j"])("li",{"data-width":"55%"},"商品詳情"),Object(a["j"])("li",{"data-width":"22%"},"數量"),Object(a["j"])("li",{"data-width":"20%"},"小計")],-1),O={class:"cart-data-content_detail"},m=["src","alt"],g={class:"cart-data-content_price"},h={class:"cart-data-count"},v=["onClick"],D=["onClick"],C={class:"cart-data-content_total"},I=["onClick"],S={class:"cart-data-content-media_detail"},f=["src","alt"],y={"data-width":"65%"},N={class:"cart-data-content_price"},k=["onClick"],w={class:"row horizontal space_between","data-space-top":"1rem"},L={class:"cart-data-count"},V=["onClick"],F=["onClick"],T={class:"cart-data-content_total"},_={class:"order-options"},P={class:"send"},x=Object(a["j"])("h2",null,"送貨以及付款方式",-1),z=Object(a["j"])("p",null,"送貨方式",-1),U={class:"sent_options"},G=Object(a["j"])("p",null,"付款方式",-1),B={class:"sent_options"},A={class:"info"},M=Object(a["j"])("h2",null,"訂單資訊",-1),H={class:"row horizontal space_between"},J=Object(a["j"])("p",null,"商品總計：",-1),R={class:"row horizontal space_between"},E=Object(a["j"])("p",null,"運費",-1),W={class:"row horizontal space_between"},X=Object(a["j"])("p",null,"優惠券",-1),Y={key:0},$={class:"row horizontal h_end"},q=Object(a["j"])("hr",null,null,-1),K={class:"row horizontal space_between"},Q=Object(a["j"])("p",null,"合計：",-1),Z={class:"discount-content"},ee=["id","value","onClick"],te=["for"],ce={class:"dialog-discount"},ae=Object(a["j"])("p",null,"單筆消費滿1000元即可使用一張",-1),se=Object(a["j"])("p",null,"使用日期：2022/12/31",-1),oe={class:"row horizontal","data-space-top":"1rem"},le={class:"row horizontal h_end","data-width":"80%",style:{margin:"20px auto"}};function ne(e,t,c,ne,ie,de){const je=Object(a["L"])("Toast"),re=Object(a["L"])("Button"),be=Object(a["L"])("guideLine"),ue=Object(a["L"])("Steps"),pe=Object(a["L"])("InputNumber"),Oe=Object(a["L"])("Dropdown"),me=Object(a["L"])("Dialog");return Object(a["F"])(),Object(a["i"])("div",s,[Object(a["n"])(je,{position:"center"}),Object(a["n"])(je,{position:"center",group:"goodsDelete"},{message:Object(a["W"])(e=>[Object(a["j"])("div",o,[Object(a["j"])("div",l,[Object(a["j"])("div",n,[i,Object(a["j"])("h4",null,Object(a["P"])(e.message.summary),1)]),Object(a["j"])("div",d,[Object(a["n"])(re,{class:"p-button-success",label:"取消",onClick:t[0]||(t[0]=e=>ne.onReject()),"data-space-right":"1rem"}),Object(a["n"])(re,{class:"p-button-secondary",label:"確定",onClick:t=>ne.onConfirm(e.message.ID)},null,8,["onClick"])])])])]),_:1}),Object(a["n"])(be,{data:ne.guideData},null,8,["data"]),Object(a["j"])("div",j,[Object(a["j"])("div",r,[Object(a["n"])(ue,{model:ne.steps},null,8,["model"])]),b,Object(a["j"])("div",u,[p,(Object(a["F"])(!0),Object(a["i"])(a["a"],null,Object(a["J"])(ne.state.goodsList,(e,t)=>(Object(a["F"])(),Object(a["i"])("div",{class:"cart-data-content",key:t},[Object(a["j"])("div",O,[Object(a["j"])("img",{src:ne.renderCartImg(e.ImageUrls[0].Url),alt:e.ImageUrls[0].Ident},null,8,m),Object(a["j"])("div",null,[Object(a["j"])("h3",null,Object(a["P"])(e.Goods.Name),1),Object(a["j"])("span",null,Object(a["P"])(e.specsName),1),Object(a["j"])("p",g,"NT"+Object(a["P"])(e.TimestampPice),1)])]),Object(a["j"])("div",h,[Object(a["j"])("i",{class:"pi pi-minus",style:{"font-size":"0.5rem"},onClick:t=>ne.changeCart("minus",e)},null,8,v),Object(a["n"])(pe,{modelValue:e.Specs[0].Num,"onUpdate:modelValue":t=>e.Specs[0].Num=t,class:"p-inputtext-sm"},null,8,["modelValue","onUpdate:modelValue"]),Object(a["j"])("i",{class:"pi pi-plus",style:{"font-size":"0.5rem"},onClick:t=>ne.changeCart("plus",e)},null,8,D)]),Object(a["j"])("div",C,"NT "+Object(a["P"])(e.total),1),Object(a["j"])("i",{class:"pi pi-times",onClick:t=>ne.deleteCartData(e.ID)},null,8,I)]))),128)),(Object(a["F"])(!0),Object(a["i"])(a["a"],null,Object(a["J"])(ne.state.goodsList,(e,t)=>(Object(a["F"])(),Object(a["i"])("div",{class:"cart-data-content-media",key:t},[Object(a["j"])("div",S,[Object(a["j"])("img",{src:ne.renderCartImg(e.ImageUrls[0].Url),alt:e.ImageUrls[0].Ident},null,8,f),Object(a["j"])("div",y,[Object(a["j"])("h3",null,Object(a["P"])(e.Goods.Name),1),Object(a["j"])("span",null,Object(a["P"])(e.specsName),1),Object(a["j"])("p",N,"NT"+Object(a["P"])(e.TimestampPice),1)]),Object(a["j"])("i",{class:"pi pi-times",onClick:t=>ne.deleteCartData(e.ID)},null,8,k)]),Object(a["j"])("div",w,[Object(a["j"])("div",L,[Object(a["j"])("i",{class:"pi pi-minus",style:{"font-size":"0.5rem"},onClick:t=>ne.changeCart("minus",e)},null,8,V),Object(a["n"])(pe,{modelValue:e.Specs[0].Num,"onUpdate:modelValue":t=>e.Specs[0].Num=t,class:"p-inputtext-sm"},null,8,["modelValue","onUpdate:modelValue"]),Object(a["j"])("i",{class:"pi pi-plus",style:{"font-size":"0.5rem"},onClick:t=>ne.changeCart("plus",e)},null,8,F)]),Object(a["j"])("div",T,"NT "+Object(a["P"])(e.total),1)])]))),128))]),Object(a["j"])("div",_,[Object(a["j"])("div",P,[x,z,Object(a["j"])("div",U,[Object(a["n"])(Oe,{modelValue:ne.state.deliveryValue,"onUpdate:modelValue":t[1]||(t[1]=e=>ne.state.deliveryValue=e),options:ne.sentItems,optionLabel:"name",optionValue:"name",placeholder:"請選擇送貨方式",onChange:t[2]||(t[2]=e=>ne.feeMethodSelect())},null,8,["modelValue","options"])]),G,Object(a["j"])("div",B,[Object(a["n"])(Oe,{modelValue:ne.state.paymentValue,"onUpdate:modelValue":t[3]||(t[3]=e=>ne.state.paymentValue=e),options:ne.payItems,optionValue:"name",optionLabel:"name",placeholder:"請選擇付款方式"},null,8,["modelValue","options"])])]),Object(a["j"])("div",A,[M,Object(a["j"])("div",H,[J,Object(a["j"])("p",null,"NT "+Object(a["P"])(ne.allGoodsTotal),1)]),Object(a["j"])("div",R,[E,Object(a["j"])("p",null,"NT "+Object(a["P"])(ne.feeChange),1)]),Object(a["j"])("div",W,[X,1===ne.state.discountID.length?(Object(a["F"])(),Object(a["i"])("p",Y,"NT -"+Object(a["P"])(ne.state.discountFee),1)):Object(a["h"])("",!0)]),Object(a["j"])("div",$,[Object(a["j"])("span",{onClick:t[4]||(t[4]=e=>ne.dialogDiscountVisible=!0)},"使用優惠券")]),q,Object(a["j"])("div",K,[Q,Object(a["j"])("p",null,"NT "+Object(a["P"])(ne.orderTotal),1)])]),Object(a["n"])(me,{header:"優惠券",visible:ne.dialogDiscountVisible,"onUpdate:visible":t[8]||(t[8]=e=>ne.dialogDiscountVisible=e),style:{width:"500px"},breakpoints:{"550px":"60vw"},class:"cart_dialog"},{footer:Object(a["W"])(()=>[Object(a["j"])("div",oe,[Object(a["j"])("button",{class:"button_cancel",onClick:t[6]||(t[6]=e=>ne.discountButton("cancel"))},"取消"),Object(a["j"])("button",{class:"button_confirm",onClick:t[7]||(t[7]=e=>ne.discountButton("confirm"))},"確定")])]),default:Object(a["W"])(()=>[Object(a["j"])("div",Z,[(Object(a["F"])(!0),Object(a["i"])(a["a"],null,Object(a["J"])(ne.state.benefits,(e,c)=>(Object(a["F"])(),Object(a["i"])("div",{key:c,class:"discount_item"},[Object(a["X"])(Object(a["j"])("input",{id:e.ID,type:"checkbox",value:e.ID,"onUpdate:modelValue":t[5]||(t[5]=e=>ne.state.discountID=e),onClick:t=>ne.handleSpecsMax(t,e.Amount)},null,8,ee),[[a["S"],ne.state.discountID]]),Object(a["j"])("label",{for:e.ID},[Object(a["j"])("div",ce,[Object(a["j"])("h2",null,"NT $"+Object(a["P"])(ne.state.benefits[c].Amount),1),ae,se])],8,te)]))),128))])]),_:1},8,["visible"])]),Object(a["j"])("div",le,[Object(a["j"])("button",{class:"button_confirm","data-width":"40%",onClick:t[9]||(t[9]=e=>ne.handleNextPage())},"前往結賬")])])])}var ie=c("897e"),de=c("6c02"),je=c("18cb"),re=c("408b"),be=c("46ef"),ue=c("5502"),pe={name:"Cart",components:{guideLine:ie["a"]},setup(){const e=Object(ue["b"])(),t=Object(a["r"])("reload"),c=Object(de["c"])(),s=Object(je["b"])(),o=Object(a["I"])(!1),l=Object(a["H"])({discountID:[],benefits:[],goodsList:[],goodsSpecs:[],currentSpecs:[],updateCartForm:{ID:0,GoodsID:0,Specs:[{ID:0,SpecID:0,Num:0}]},deliveryValue:null,paymentValue:null,deliveryFee:0,discountFee:null,total:0}),n=Object(a["H"])([{name:"現金付款"},{name:"信用卡"},{name:"匯款"}]),i=Object(a["H"])([{name:"自取"},{name:"冷藏包裹"}]),d=Object(a["H"])([{label:"購物車",to:"/cart"}]),j=Object(a["H"])([{label:"訂單資訊",to:"/cart"},{label:"填寫資料",to:"/fillInfo"},{label:"資料確認",to:"/finish"}]),r=()=>{"自取"===l.deliveryValue?l.deliveryFee=0:l.deliveryFee=150},b=Object(a["e"])(()=>1*l.deliveryFee),u=Object(a["e"])(()=>{let e=0;for(let t in l.goodsList)e+=l.goodsList[t].total;return e+l.deliveryFee-l.discountFee}),p=Object(a["D"])(()=>{const e="";Object(be["a"])(re["i"],e,e=>{l.goodsList=[...e.data.Data],S(),h()})}),O=Object(a["D"])(()=>{const e=JSON.parse(localStorage.getItem("goodsInfo"));let t=e.map(e=>e.GoodsSpecs);l.goodsSpecs=t.flat(1/0)}),m=e=>{for(let t in l.goodsSpecs)e.Specs[0].SpecID==l.goodsSpecs[t].ID&&(e.specsName=l.goodsSpecs[t].Specs)},g=e=>{for(let t in e.Specs)for(let c in l.goodsSpecs)e.Specs[t].SpecID==l.goodsSpecs[c].ID&&e.specsName.push(l.goodsSpecs[c].Specs);e.specsName.splice(0,1),e.specsName=e.specsName.join()},h=()=>{for(let e in l.goodsList)l.goodsList[e].Specs.length>1?(l.goodsList[e].specsName=[],g(l.goodsList[e])):1==l.goodsList[e].Specs.length&&m(l.goodsList[e])},v=async e=>{s.add({severity:"success",summary:"確定要刪除商品？",group:"goodsDelete",ID:e})},D=()=>{s.removeGroup("goodsDelete")},C=async e=>{const c={ID:e};await Object(be["a"])(re["g"],c,()=>{s.removeGroup("goodsDelete"),p()}),await t()},I=async()=>{l.deliveryValue&&l.paymentValue?(e.commit("cartModules/SET_CARTPAYMENT",l),e.commit("cartModules/SET_CARTTOTAL",u.value),c.push({name:"FillInfo"})):s.add({severity:"error",summary:"請選擇送貨與付款方式",group:"errorBox"})},S=()=>{for(let e in l.goodsList)l.goodsList[e]["total"]=l.goodsList[e].TimestampPice*l.goodsList[e].Specs[0].Num},f=Object(a["e"])(()=>{let e=0;for(let t in l.goodsList)e+=l.goodsList[t].total;return e}),y=(e,t)=>{l.updateCartForm.ID=t.ID,l.updateCartForm.GoodsID=t.GoodsID,l.updateCartForm.Specs[0].ID=t.Specs[0].ID,l.updateCartForm.Specs[0].SpecID=t.Specs[0].SpecID,"plus"===e&&t.Specs[0].Num<99?l.updateCartForm.Specs[0].Num=t.Specs[0].Num+1:"minus"===e&&t.Specs[0].Num>1&&(l.updateCartForm.Specs[0].Num=t.Specs[0].Num-1);const c=l.updateCartForm;Object(be["a"])(re["r"],c,()=>{p()})},N=Object(a["D"])(()=>{const e="";Object(be["a"])(re["d"],e,e=>{l.benefits=[...e.data.Data.DiscountTicket]})}),k=(e,t)=>{!0===e.target.checked?f.value>=1e3?1==l.discountID.length?(e.target.checked=!1,s.add({severity:"error",summary:"已超過數量！",group:"errorBox"})):l.discountFee=t:(e.target.checked=!1,s.add({severity:"error",summary:"消費金額未達到！",group:"errorBox"})):l.discountFee=null},w=e=>{const t={cancel:()=>{l.discountFee=null,l.discountID=[],o.value=!1},confirm:()=>{o.value=!1}};t[e]()},L=e=>"https://nocodenolife.net/ann//imgs/"+e;return{state:l,getGoodsSpecs:O,getBenefitsData:N,guideData:d,steps:j,sentItems:i,payItems:n,dialogDiscountVisible:o,getCartData:p,allGoodsTotal:f,feeChange:b,orderTotal:u,discountButton:w,specsChange:h,renderCartImg:L,handleSpecsMax:k,changeCart:y,handleNextPage:I,deleteCartData:v,onConfirm:C,onReject:D,totalCount:S,feeMethodSelect:r}}},Oe=c("6b0d"),me=c.n(Oe);const ge=me()(pe,[["render",ne]]);t["default"]=ge},"897e":function(e,t,c){"use strict";var a=c("7a23");const s={class:"guide","data-space-bottom":"2.5rem"};function o(e,t,c,o,l,n){const i=Object(a["L"])("Breadcrumb");return Object(a["F"])(),Object(a["i"])("div",s,[Object(a["n"])(i,{home:o.home,model:o.pageData},null,8,["home","model"])])}var l={name:"GuideLine",props:{data:Array},setup(e){const t=e.data,c=Object(a["H"])({icon:"pi pi-home",to:"/content"});return{pageData:t,home:c}}},n=c("6b0d"),i=c.n(n);const d=i()(l,[["render",o]]);t["a"]=d}}]);
//# sourceMappingURL=chunk-167d0209.0afbfc8d.js.map